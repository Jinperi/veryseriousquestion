<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heartopia Surprise üíï</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --paper: #fffcf2; 
            --text: #403d39; 
            --heart: #d81b60; 
            --bg-grad: linear-gradient(45deg, #ffdde1, #ee9ca7, #ffdde1, #ffc3a0); 
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Comic Sans MS", "Arial", sans-serif; }

        body { 
            background: var(--bg-grad); 
            background-size: 400% 400%; 
            animation: gradientBG 15s ease infinite; 
            min-height: 100vh; 
            color: #fff; 
            overflow-x: hidden; 
            position: relative;
        }

        @keyframes gradientBG { 0% {background-position: 0% 50%;} 50% {background-position: 100% 50%;} 100% {background-position: 0% 50%;} }

        /* FLOATING EMOJIS */
        .emoji-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden; }
        .floating-emoji { position: absolute; font-size: 1.5rem; opacity: 0.6; animation: float 15s linear infinite; }
        @keyframes float {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        /* MUSIC PLAYER */
        #music-player {
            position: fixed; top: 15px; left: 15px; z-index: 1000;
            background: rgba(255, 255, 255, 0.25); backdrop-filter: blur(12px);
            padding: 12px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.4);
            display: none; width: 230px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .song-info { font-size: 0.8rem; margin-bottom: 8px; color: #ad1457; font-weight: bold; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .controls { display: flex; gap: 10px; align-items: center; justify-content: center; }
        .ctrl-btn { background: #ad1457; color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        .page-section { display: none; min-height: 100vh; width: 100%; flex-direction: column; justify-content: center; align-items: center; padding: 20px; text-align: center; position: relative; z-index: 1; }
        .active { display: flex !important; }

        /* COUNTDOWN & BUTTON LOCK */
        #countdown-box { background: rgba(255, 255, 255, 0.2); padding: 40px; border-radius: 30px; backdrop-filter: blur(8px); border: 2px solid rgba(255, 255, 255, 0.3); }
        #timer { font-size: 2.5rem; font-weight: bold; margin: 20px 0; font-variant-numeric: tabular-nums; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        
        .enter-btn { 
            padding: 15px 35px; font-size: 1.3rem; border-radius: 50px; border: none; 
            cursor: pointer; background: #ff1493; color: white; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: 0.3s;
        }
        .enter-btn:disabled {
            background: #999 !important;
            cursor: not-allowed;
            opacity: 0.6;
            transform: scale(0.95);
        }

        /* OTHER SECTIONS */
        .img-row img { width: 150px; margin: 10px; border-radius: 15px; }
        .buttons { position: relative; width: 300px; height: 160px; margin: 20px auto; }
        #yesBtn, #noBtn { cursor: pointer; border: none; border-radius: 50px; font-weight: bold; position: absolute; }
        #yesBtn { background: #ff1493; color: white; width: 140px; height: 60px; left: 50%; transform: translateX(-50%); z-index: 5; font-size: 1.4rem;}
        #noBtn { background: #fff; color: #ff69b4; width: 120px; height: 50px; bottom: 0; left: 50%; transform: translateX(-50%); }

        .split-container { display: flex; gap: 20px; max-width: 1000px; width: 95%; align-items: center; justify-content: center; }
        .abstract-box { flex: 1; background: #ffb6c1; border: 5px solid black; padding: 30px 20px; display: flex; flex-direction: column; justify-content: space-between; min-height: 450px; box-shadow: 12px 12px 0px black; text-align: left; }
        .abstract-text { font-size: 2.5rem; color: black; font-weight: 900; line-height: 0.9; text-transform: uppercase; }
        .abstract-btn { background: black; color: white; padding: 15px; border: none; font-weight: bold; cursor: pointer; text-decoration: none; text-align: center; display: block; width: 100%; margin-top: auto; }
        
        .envelope-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; max-width: 900px; margin: 20px auto; }
        .letter-btn { padding: 12px 20px; background: var(--paper); color: #6d4c41; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px; cursor: pointer; font-style: italic; box-shadow: 4px 4px 0px rgba(0,0,0,0.15); transition: 0.2s; }
        .letter-content { display: none; background: var(--paper); padding: 40px; border-radius: 15px; max-width: 650px; margin: 30px auto; color: var(--text); border-left: 10px solid var(--heart); text-align: left; box-shadow: 0 15px 40px rgba(0,0,0,0.15); }

        @media (max-width: 850px) { .split-container { flex-direction: column; } }
    </style>
</head>
<body>

    <div class="emoji-container" id="emoji-bg"></div>

    <div id="music-player">
        <div class="song-info" id="song-title">üéµ Loading...</div>
        <div class="controls">
            <button class="ctrl-btn" onclick="prevSong()">‚èÆ</button>
            <button class="ctrl-btn" id="playPauseBtn" onclick="togglePlay()">‚è∏</button>
            <button class="ctrl-btn" onclick="nextSong()">‚è≠</button>
        </div>
    </div>

    <audio id="waitingMusic" loop>
        <source src="SpotiDownloader.com - Call u Mine_ - J3R0 (mp3cut.net).mp3" type="audio/mpeg">
    </audio>
    <audio id="bgMusic"></audio>
    <audio id="noMusic" src="original sound - roadsps2_musicaldown.com_1769674850-[AudioTrimmer.com].mp3"></audio>
    <audio id="yesMusic" src="Yayyy! Sound Effect - Sound Effects.mp3"></audio>

    <div id="home-section" class="page-section active" onclick="startWaitingMusic()">
        <div id="countdown-box">
            <h1>Something special is coming...</h1>
            <p>(Click anywhere to enable music üéµ)</p>
            <div id="timer">00d 00h 00m 00s</div>
            <button class="enter-btn" id="mainEnterBtn" onclick="startExperience()" disabled>Locked until Valentine's üîí</button>
        </div>
    </div>

    <div id="trap-section" class="page-section">
        <div class="img-row">
            <img src="8e621fbc59509edb76b7fcf1f5e6f704.jpg" alt="Hamster">
            <img src="24_01_2026 20_19_15.png" alt="Squirrel">
        </div>
        <h1>Will you be my valentines? ‚ú®</h1>
        <div class="buttons">
            <button id="yesBtn">YES! üíñ</button>
            <button id="noBtn">No...</button>
        </div>
    </div>

    <div id="success-section" class="page-section">
        <div class="split-container">
            <div class="abstract-box">
                <div class="abstract-text">LET HIM<br>KNOW!</div>
                <p style="color: black; margin: 15px 0;">Yippie! Well since we can't do something physical I made you something in heartopia. Tell me when you're hopping on!</p>
                <form action="https://formspree.io/f/mnjvpplw" method="POST">
                    <input type="hidden" name="Message" value="She said YES! (Coming to Heartopia) üíï">
                    <button type="submit" class="abstract-btn">SEND SIGNAL ‚ö°</button>
                </form>
            </div>
            <div style="flex: 0 0 250px;"><img src="26_01_2026 12_41_58.png" style="width:100%;"></div>
            <div class="abstract-box">
                <div class="abstract-text">FOR YOUR<br>EYES ONLY</div>
                <p style="color: black; margin: 15px 0;">A digital post office with notes for whenever you need them.</p>
                <button class="abstract-btn" onclick="showSection('keepsake-section')">OPEN LETTERS ‚úâÔ∏è</button>
            </div>
        </div>
    </div>

    <div id="keepsake-section" class="page-section">
        <h1 style="color: #ad1457; margin-bottom: 20px;">‚úâÔ∏è Post Office</h1>
        <div class="envelope-grid" id="grid"></div>
        <div id="letter-display" class="letter-content">
            <h2 id="l-title" style="color:var(--heart); margin-bottom:15px; font-family:'Brush Script MT', cursive; font-size:2.5rem;"></h2>
            <p id="l-text" style="line-height: 1.8; color: #444;"></p>
        </div>
    </div>

    <script>
        // EMOJIS
        setInterval(() => {
            const container = document.getElementById('emoji-bg');
            const el = document.createElement('div');
            el.className = 'floating-emoji';
            el.innerText = ['üíñ', '‚ú®', 'üå∏', '‚òÅÔ∏è', 'üß∏'][Math.floor(Math.random() * 5)];
            el.style.left = Math.random() * 100 + 'vw';
            el.style.animationDuration = (Math.random() * 10 + 10) + 's';
            container.appendChild(el);
            setTimeout(() => el.remove(), 20000);
        }, 1500);

        // TIMER & BUTTON LOCK
        const targetDate = new Date("February 14, 2026 00:00:00").getTime();
        const enterBtn = document.getElementById("mainEnterBtn");

        const timerInterval = setInterval(() => {
            const now = new Date().getTime();
            const diff = targetDate - now;

            if (diff <= 0) {
                clearInterval(timerInterval);
                document.getElementById("timer").innerHTML = "IT'S TIME! üíï";
                enterBtn.disabled = false;
                enterBtn.innerHTML = "Open My Heart üíñ";
            } else {
                const d = Math.floor(diff / 86400000);
                const h = Math.floor((diff % 86400000) / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                document.getElementById("timer").innerHTML = `${d}d ${h}h ${m}m ${s}s`;
            }
        }, 1000);

        // AUDIO SYSTEM
        const waitMusic = document.getElementById("waitingMusic");
        const bgMusic = document.getElementById("bgMusic");
        const playlist = [
            { title: "The Cutest Pair", file: "SpotiDownloader.com - the cutest pair - Regina Song[rebalanced].mp3" },
            { title: "Call U Mine", file: "SpotiDownloader.com - Call u Mine_ - J3R0 (mp3cut.net).mp3" },
            { title: "Puppy Love", file: "SpotiDownloader.com - Puppy love (Feat. Nathania & Harms) - gani[rebalanced].mp3" }
        ];
        let currentIdx = 0;

        function startWaitingMusic() {
            waitMusic.play().catch(e => console.log("Waiting for interaction..."));
        }

        function startExperience() {
            waitMusic.pause();
            document.getElementById('music-player').style.display = 'block';
            loadSong(0);
            showSection('trap-section');
        }

        function loadSong(index) {
            currentIdx = index;
            bgMusic.src = playlist[currentIdx].file;
            document.getElementById("song-title").innerText = "üéµ " + playlist[currentIdx].title;
            bgMusic.play();
        }

        function nextSong() { currentIdx = (currentIdx + 1) % playlist.length; loadSong(currentIdx); }
        function prevSong() { currentIdx = (currentIdx - 1 + playlist.length) % playlist.length; loadSong(currentIdx); }
        bgMusic.onended = nextSong;

        function showSection(id) {
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // TRAP LOGIC
        const yesBtn = document.getElementById("yesBtn"), noBtn = document.getElementById("noBtn");
        let scale = 1;
        noBtn.addEventListener("click", () => {
            document.getElementById("noMusic").play();
            scale += 0.8; yesBtn.style.transform = `translateX(-50%) scale(${scale})`;
            if(scale > 6) { noBtn.style.display="none"; yesBtn.style.width="100vw"; yesBtn.style.height="100vh"; }
        });
        yesBtn.addEventListener("click", () => {
            document.getElementById("yesMusic").play();
            confetti({ particleCount: 200, spread: 80 });
            showSection('success-section');
        });

        // LETTERS
        const letters = {
            start: { t: "...You first receive this", h: "Hello Precious,", p: "I built this little corner of the world just for you. I know life can get heavy sometimes, and I can‚Äôt always be right there to hold your hand..." },
            sad: { t: "...Feeling shitty", h: "Read this...", p: "Hey mon coeur, take a deep breath for me. I‚Äôm so sorry you‚Äôre going through it right now..." },
            happy: { t: "...Really happy", h: "Yippie ü§∏‚Äç‚ôÇÔ∏è!", p: "Im glad your feeling happy. Your happiness is something I value alot and you being happy makes me happy." }
            // ... (Rest of your letter content remains the same)
        };

        const grid = document.getElementById('grid');
        Object.keys(letters).forEach(key => {
            const btn = document.createElement('button');
            btn.className = 'letter-btn';
            btn.innerText = letters[key].t;
            btn.onclick = () => {
                document.getElementById('letter-display').style.display = 'block';
                document.getElementById('l-title').innerText = letters[key].h;
                document.getElementById('l-text').innerText = letters[key].p;
            };
            grid.appendChild(btn);
        });
    </script>
</body>
</html>
